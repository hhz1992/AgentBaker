#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/9xZbXObyLL+rl/RS7hrKTdIQrK9TlzkLhZjhbIMFCA7vo6XwmIkUcagwMhJNvZ/PzUwvOnFq2S3TnJO+Ys1/UxP99M93Q28+KVz64edWzeZNxrINB3ryrLR+cAeOZYtm7ZzKqsjaR9S2WCkjxVH1VTbsdVzpI9t6SCTnKoj5FzK9uBdITnMJO/0keJcyiNVG7+Xh0izpd8ygYlGSLbQBsBRBpAN21E1y5ZHo0Lp60yk2caaSOyWssz0QiJmEsvWDeafkgqtK22glLBeBlP0wRky1/T3ujWxol9qI10ut/fEmvwMXW3A1I+gHlJcIe7XxJUA9FgEzvWTq3TbSLVKB3ssCueWMzSGW44+rGhY843FZKBrtqxqyFTWISwqZ0eWY441TdWGhazfLWVrB/cZL2fjE0TTStNt51Qfa4rUZ2yo58MN2/rlthGyq2T09+uBOh86xrhiav9gzZuBvQl3uI4zVWrjOjQnSFPXTd0XC/oNU1ccBZ1sAPXWQcbZ0JEVhd2xPlRvYBmBTHqUh08xTP0EsVV2H/SxfUIppa5omeigEhPZUB0LmRfIrALEjQBFs5yRrp+NDQbrbYTJ/z820To4D5psy5vT8LBbQazm/6FYEa4m4GFvLVpr2n9j2gdjy9bPHQvJ5uCdo+jnsqpZmYlHDDI0xo5iqhfItKq5dbS/Ll615OiggkEX6gA5xmg8VLWaosMSpGqnumPq585AN82xYSNFOmIJZQ3fbz3ndXcdUznhtVjWSUVWRyWPrysVdGwoso1KEcuYgYVoHl6olqprjjUwVcNOr6aJZOWqUlS7lUNozRkbQ1NWUAVRMcMYm0OWmmKXxcu6suiVMhGNlCR2WYoMVMuRLUsdao6p67ZjXEpiXqgrsrSxGMg8Vy1qqSTmVdqQ08s/0I2rFCSJYlWzYYyuHEO2rEvdTK/FqTqURPEAalesKLQ6S2BRzGtCVgjWMkwUf6sBdAOZsk05RKapm5IoMu5pxVkXvmZ3/OKdkrlWVkMxr/FUdjJWR0q+i5b3bFt26yxbHpw5Q2Q7snnu2PoZ0iQxb0+rEA3Zl7p5xigYZ/ZIYt6tVuHW+ERDtmOY6FR9L4m0YWWMXcqGMzCRzJJPzGt+RaBq1vj0VB2oSEuT5cyxDHmAJJG2gBRsoxEydNOuXF1kmpKYF6tSnt+FTEz365bEN5MoJiDE0MFk0nkpxDjAboLhEWbupzvYu3fJZN7ku6+g80dTVZyReoak5iSKcZS0HlVFarZftlp85xW4LfgKi9gPCZBouVjguOle927Ave7ftI4Bf/YJPO21GuOTsWaPHd1yNPkcSVz2m2uY79CoXKW/uMZAN5FulavZb67BOp/UWSZxJ4gmbpDOXHfLWzwhQSNLwkxK171ocofjBv68oM6mReZC2j/otg/Edvewto4su6o1fPA9321oF6qiynly07JBQ95rd9v9xsqi2Bb7bVEQ8z1FcaU9nuZ8bXt3RXUa7vdSZrB41O6+bvcEsdFwF+Teje8u5ZEfLj/LMxySZgu+NgAA8GQeAd/0XIJbr/jmPEpI6N7j1itIiBsTeX0rcLzIpXs/uT5xplHsuAviBNHkLkmXY0ziL5N7z/GnztT1g2WMgd6HA+gdgLsgAtUIvAif3IBqdVOtj4/wId3uT+H6Oj0EJAm4eRR4HNzcHAOZ4zBFpHbTjOA3TrSZX8GKnmX4l5q2jsApdur/BWE49LbS9dRobKCliAKV+TiRePE4YzUJMF5IfO8YiH+PoyWR+P4xJHN/SuDXX1f+ycyLYvDBD4FvJvgjiMAzpa1j8KLCW6YO+OKfr78/UU23MXbvyijkkQDeBwF/LLTBKn0FJ+gzniwJ9uADx//+gaMb6RnJcQ0aY7KMQxBL+oME1xCp68CXNBRSFgEvCnFjh2OfNlHuhJGTEJck/y3c/1OEVtiaYeIQN751g6Bgibix8xxTGTxlahkHEr9fRojjv1Z2P+WEc1uoq2BX6HNjEMif0xRCT9uFuoq276QvD9ZhtwuTZRyAME2sEfDpv1FhzN+jnCp2pn5QloR0ZcfcpBsXLplL/D6j/6BGf1XXX/JfBdcDcH0NwhT4/DS4uSkisJn8qqq/yX5xZzaFILfou2JQdLEa/c8wX7LdT6EL9wF7UidakI775zLGnUkQLT3BD30iUGzSThEpdhbjBQinH2lUcj1PHPApgrLJGOl+S10plO69QPrpXiVCz4fn31FWUiT2QPCB61DzOh63ErCsoxY2v33L6KjGppgwigB9mvsBhukywTF0Hty4E/i3HW9xN6PD11255C5IJ/ATklTWJ+5kjlOJG0/m/gNmwrcdDz90wmUQQO/tr2KN5NTKvUvXJ344SyOTT7vRlE41kJq316jT069mGnWC1tblgk4Pa6kmZkGnqAzhREuyWBKpQ+4X1FphhomQidrR8ptaz5ZRLXUsG2AVdKLKmnNq6pqNNEUKo9APCY7dCfEfyshThkEQJlE49Wd0shNcEIRpFE9wuujhaYFlJtOiIXwBP0xItU7+As0ckPmUcg6PQDAGfo0F+lCR5jkC7o/m9SW6edN+2XpsXmN0E8ftly2ea9F8L/vAxCWb9GxuGpvB/9C9YclwsOMks0JLPtFsm7nLxGIU/4DR5ofmF3ObtgJlcTd780ZfED8KkzdvJK66N53/BSGMBLZDiPEkur/HoZfQDP3R41h++8sa8Y0JUxCx3ceNw/mzSbVYxrMf8aTyQ1MqdXrHhPrxibNbdjCfvicHPD+hKTmLXS9PhVrXorgqZmPnogCBAVj/2iEVtqTB7imwa/i3d6vinUUyjz7NoyAb5Sr9q+oZ3bzayDZQ823trOhOmzStJ95z8MaOWVnLx7UmlmYcy7fN2VbjpNLCNuZZ8iUh+H5C6NNC+t7p2+oNJA+T0L3H+WPn9z6PF2aA5+L7KBRiHESut8sGZjfwzJSfpRxUuU1ItPiPI5Ya/VOz6vmJe7vbk+NPRSyz++fkNisF1JVv4/XvkkmJEYSMpJ+HkAccJ34UOrPiqZHghADHN9NPJlPY+5/kQ7gHHP87B4/AvspcwCPMseuBEILYyt6Cs3fRRRagkOaAHHpWrequ1WMQu104gH4X+MwfE2WfPi1btseWxP9ffR8kxCXLBHgxG0YX7gzHIATwlj2ZRzP2soQXhQzbDqJZpTnVDwAhxNBdo5m94BJhEi0DD8KIwC3Ovlxgj2tsjASj1p/CL89/qiidwWF2U8Sdjs/QHtx+KVVst6UaDSW7kmk4KqXan1ZsCdK+GvokoVPMMp326cyfzxMfqUHtBMcP/gRzKwbXewHknvIiTfFtZEaLRZXMtcq3kxqGZXoyv1/kZJB4iamXLryV4BYaCb5/wPEgul+4lY8k7NOXI0t8M3tnRIesyZKA4AH3vxyd3MRWDXpSQHvboOk3oq+F7id2T4qVkyeOveisvZqjdwx7UhP4JnuBVdEB1e10EIxhj/7RO5pfzwtowTMW8F+zE67Fm6dN5xdp9NR48Q6NDGRaSD9t/CsAAP//a9bDv0AmAAA=

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6xYbXPauBb+7l9x6jJ56dYYSDdtb4fuUHAabihwbejee7sdj7COQYORXEmmYdP89x3ZvJiEbZOd8iFjH59z9Jy3R1KePnEnjLsTomaW5/vhRbfnhb+3Ru3LcNT94A3Go+Y5WAo1ONcWi+ETODG4ItUu+TOT6EaCa8I4SuWmUiyZYoJXI7FIE9QIn9+AniG3IP9hNBNgtxKJhK5AEg5agMqiCJUCvGaa8Wm1WrU36tdMQ82KmWWN3437o3Hoez2vFXjNykmiJqHEBIlCcCQ46jQH9wkqN/u6t9Bsgl0/r9Ze2PC5jEdlVABJtTM1wa2AZFpIXIglQjSTgq+sLebKbzsLtVIaF5FOQKLSROq1hDqaLVCteERzyIXhCSUaT59XTmZCaU4WePoccqsoU1osVCRZqt++zRO6sKxYSGDAOFROFH6BOpyd12qnb4CKHECRf/Wj/IdKZDLCqprdKQDAVGIKzsUXOH566fWGnh94g4vjRzg8OoKJRDLPPcZsB6vCwMEvOeB7q+aVrBxuryLLicKttkoQU6hvVqCCo6WQgsPAdkuwXWo/HLhVPD3CwPpKmA5jIcOYJVgEVv+hPeNKkyRRJlffvn0/8gdCKrn8h6AiwWM2/ZmYdh6tnBx+uba8UbsTDj3PD9ueP2pWTooJuNmXdy+67dbIC27hG0SZBocefzo2nNLYCT7ngvpO8DwXVE5OKjf9QccLu/2O99/bX+qnp6elZa+8/x1adeh3P7ZGnvn881ZdE+KGdAaBoZlKe+B7gyAcBGG/9cHbp5uC/NozwqeMT4FiTLJEwzyboCGTCeOQiIhoJnhBgFfjd1571GvmpVir5cyyZeElka7MuCtxIoR2JH7JmES6N36+924wGPnef8Zd3+s0tczQ2k7bnY8xMR/MEkV5M4ktumB8rFBuQrUrN++H49Ak5NaGJ02wjcs71BolSPg4fT8cdyRbolS504+XnbA3eB/kbTdsjS6bpS5bzqizbvTt9rGNtHLPFO6nlqLGSCOFqUgocmALMkVIJW782mVs7U1Xd42ayj9djHu9sNsPRq1eL7yTlW3OtmnoBuHHy86tDU0wKdjPwA7WWJlyf7zsAGVKSwGTTEM+vAei4kJDLDJO7QPcadTzie0PRuHFYNzvlEn4MPi83pum2TXqeo/cNarhdRPVQS8mxE2ZSzGu09rBVO3SUwT9vlSCN6DmLE2Lpk+RU+QRQ7UxX3f8AzCWK86Vac6MMt0pTAtn26r6GTfb8VYumZmep9CNIcqfYYp6iwFp7hoyhcA0EGVejSJECcuVkFAQMURaWu1eNxwNBr2mXXiyN4uMMMFUSE2HSTZl3LK2sPqovwo538jX0qtsggnqq2K0W5yap6EU16vvahC6KKfqyY94J0+VP2wXgy2RaDRuPhDOYlS6w2Rp3q9eqdJbu98tUYGZ00CTaN7lGmVMIlSWZRX+t4mnsBF9EJxpIQOUSxbhRhqslKlE8bKOb/32b5FJTpI8uMONWG6+B/eK+e3PZIPSeoT1l07t5Wt0XtTOImdy9mvDIfXXjTpio/YSEd6Cq1bKnWTKXS7MX1pQmTtbhplmiZvxCeN0d2pZn1DqZ+yPn77KH9wGF3XkyqhqdolkM/kxs+Qi3wzMV2LoNNVVU7MqdV+/TlEyQVn0mNkiqQ6nqMM0k1OERg3OalBv1ICkJJphwzGwFBwVlN7qdTutUXfQDz3fb9YsqzXshoHnf/T8sNMPQt8b+V0vaDZqGwQlhXztZhOeVVPJlkRjwvi8+qwM52/d5fcC3wualROJWq6iBQ1ZHMaEJZlEqNwctrw1Z2rgKhFinqX7agbO7akVjIJm5bcN3GCUj1htP0frj76Xp/OZXT9/VT0/q9Ybr6v1c/sZ3O/AO5nKCf3qVRCW1m/9f+x7OdjeYHA1HoYXrW7v/vH4AZ4O+YjZjqRLqu1Bv79N66+1cnSPq1Tx+zvP9VqtvFn9sGRl43XNInCWfx6oGLx4cWaOtQ/IS+41z8h6u6nsn4DunimOi5MVbE5Wz6EQmL2MC4rmplaHBeOZxuPcbHuZBicCW80yTcVXbq6odTiy/wFzkVQviJz/3uoxnl23psg1ZHwmEgpH9+r6ONdupqSbsMmWNtYX2SolLFmt3T8Uw/bKa7fzmy0UV1uIGWdqhrRqWgMUyiVKiATnGJmNH6IZRnOIBMV/2VDZr+F37tDI6cEb9GJOmQQnPXyBMaccLbJo9uD/YFipApJdx1+/GqreGW01nVRVEzGFI8sqTmp3QrCeeoML668AAAD//3vDj1hmEQAA

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
      sandbox_image = "oss/kubernetes/pause:1.3.1"
      [plugins."io.containerd.grpc.v1.cri".containerd]
        
        snapshotter = "teleportd"
        
        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/runc"
        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/runc"
      
      [plugins."io.containerd.grpc.v1.cri".cni]
        bin_dir = "/opt/cni/bin"
        conf_dir = "/etc/cni/net.d"
        conf_template = "/etc/containerd/kubenet_template.conf"
      
      [plugins."io.containerd.grpc.v1.cri".registry.headers]
        X-Meta-Source-Client = ["azure/aks"]
    [metrics]
      address = "127.0.0.1:10257"
    
    [proxy_plugins]
      [proxy_plugins.teleportd]
        type = "snapshot"
        address = "/run/teleportd/snapshotter.sock"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    Restart=always
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF


- path: /etc/systemd/system/teleportd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=teleportd teleport runtime
    After=network.target
    [Service]
    ExecStart=/usr/local/bin/teleportd --metrics --aksConfig /etc/kubernetes/azure.json
    Delegate=yes
    KillMode=process
    Restart=always
    LimitNPROC=infinity
    LimitCORE=infinity
    LimitNOFILE=1048576
    TasksMax=infinity
    [Install]
    WantedBy=multi-user.target
    #EOF





- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
